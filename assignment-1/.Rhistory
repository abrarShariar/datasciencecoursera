complete <- function (directory, id = 1:332) {
df <- data.frame(
id = c(),
nobs = c()
)
for (i in id) {
n_char <- nchar(as.character(i))
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE)
print(file_data)
}
# df
}
complete("specdata", 1:2)
complete <- function (directory, id = 1:332) {
df <- data.frame(
id = c(),
nobs = c()
)
for (i in id) {
n_char <- nchar(as.character(i))
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
print(complete_count)
}
# df
}
complete("specdata", 1:2)
complete <- function (directory, id = 1:332) {
df <- data.frame(
id = c(),
nobs = c()
)
for (i in id) {
n_char <- nchar(as.character(i))
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
print(complete_count)
temp <- data.frame(
id = i,
nobs = complete_count
)
print(temp)
}
# df
}
complete("specdata", 1:2)
complete <- function (directory, id = 1:332) {
df <- data.frame(
id = c(),
nobs = c()
)
for (i in id) {
n_char <- nchar(as.character(i))
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
print(complete_count)
temp <- data.frame(
id = i,
nobs = complete_count
)
temp <- data.frame(
id = id,
nobs = complete_count
)
df <- rbind(df, temp)
}
df
}
print(complete("specdata", 1:2))
complete <- function (directory, id = 1:332) {
df <- data.frame(
id = c(),
nobs = c()
)
for (i in id) {
n_char <- nchar(as.character(i))
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
print(complete_count)
temp <- data.frame(
id = i,
nobs = complete_count
)
df <- rbind(df, temp)
}
df
}
print(complete("specdata", 1:2))
complete <- function (directory, id = 1:332) {
df <- data.frame(
id = c(),
nobs = c()
)
for (i in id) {
n_char <- nchar(as.character(i))
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
print(complete_count)
temp <- data.frame(
id = i,
nobs = complete_count
)
df <- rbind(df, temp)
}
df
}
print(complete("specdata", 1))
complete <- function (directory, id = 1:332) {
df <- data.frame(
id = c(),
nobs = c()
)
for (i in id) {
n_char <- nchar(as.character(i))
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
print(complete_count)
temp <- data.frame(
id = i,
nobs = complete_count
)
df <- rbind(df, temp)
}
df
}
print(complete("specdata", 1))
print(complete("specdata", c(2, 4, 8, 10, 12)))
complete <- function (directory, id = 1:332) {
df <- data.frame(
id = c(),
nobs = c()
)
for (i in id) {
n_char <- nchar(as.character(i))
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
print(complete_count)
temp <- data.frame(
id = i,
nobs = complete_count
)
df <- rbind(df, temp)
}
df
}
print(complete("specdata", 1))
print(complete("specdata", c(2, 4, 8, 10, 12)))
print(complete("specdata", 30:25))
complete <- function (directory, id = 1:332) {
df <- data.frame(
id = c(),
nobs = c()
)
for (i in id) {
n_char <- nchar(as.character(i))
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
print(complete_count)
temp <- data.frame(
id = i,
nobs = complete_count
)
df <- rbind(df, temp)
}
df
}
print(complete("specdata", 1))
print(complete("specdata", c(2, 4, 8, 10, 12)))
print(complete("specdata", 30:25))
print(complete("specdata", 3))
list.files("specdata")
all_files = list.files("specdata")
for (file in all_files) {
print(file)
}
?cor
?cor
corr <- function (directory, threshold = 0) {
result = c()
all_files = list.files(directory)
for (file in all_files) {
file_data <- read.csv(paste(directory,"/",file, sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
if (complete_count > threshold) {
result <- c(result, cor(file_data$sulfate, file_data$nitrate, na.rm = TRUE))
}
}
result
}
cr <- corr("specdata", 150)
head(cr)
corr <- function (directory, threshold = 0) {
result = c()
all_files = list.files(directory)
for (file in all_files) {
file_data <- read.csv(paste(directory,"/",file, sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
if (complete_count > threshold) {
result <- c(result, cor(file_data$sulfate, file_data$nitrate, use="complete.obs"))
}
}
result
}
cr <- corr("specdata", 150)
head(cr)
corr <- function (directory, threshold = 0) {
result = c()
all_files = list.files(directory)
for (file in all_files) {
file_data <- read.csv(paste(directory,"/",file, sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
if (complete_count > threshold) {
result <- c(result, cor(file_data$sulfate, file_data$nitrate, use="complete.obs"))
}
}
result
}
cr <- corr("specdata", 400)
head(cr)
summary(cr)
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean <- function(directory, pollutant, id = 1:332) {
combined_data <- 0
for (i in id) {
n_char <- nchar(as.character(i));
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
# filtering out column based on pollutant
col_list <- c("NULL", "NULL", "NULL", "NULL")
if (pollutant == "sulfate") {
col_list[2] <- NA
} else {
col_list[3] <- NA
}
# read the file_name - only pollutant column - filter NA
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE, colClasses = col_list)
complete_data_only <- file_data[complete.cases(file_data),]
combined_data <- c(combined_data, complete_data_only)
}
mean(combined_data)
}
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean <- function(directory, pollutant, id = 1:332) {
combined_data <- 0
for (i in id) {
n_char <- nchar(as.character(i));
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
# filtering out column based on pollutant
col_list <- c("NULL", "NULL", "NULL", "NULL")
if (pollutant == "sulfate") {
col_list[2] <- NA
} else {
col_list[3] <- NA
}
# read the file_name - only pollutant column - filter NA
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE, colClasses = col_list)
complete_data_only <- file_data[complete.cases(file_data),]
combined_data <- c(combined_data, complete_data_only)
}
mean(combined_data)
}
pollutantmean("specdata", "nitrate", 70:72)
pollutantmean <- function(directory, pollutant, id = 1:332) {
combined_data <- 0
for (i in id) {
n_char <- nchar(as.character(i));
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
# filtering out column based on pollutant
col_list <- c("NULL", "NULL", "NULL", "NULL")
if (pollutant == "sulfate") {
col_list[2] <- NA
} else {
col_list[3] <- NA
}
# read the file_name - only pollutant column - filter NA
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE, colClasses = col_list)
complete_data_only <- file_data[complete.cases(file_data),]
combined_data <- c(combined_data, complete_data_only)
}
mean(combined_data)
}
pollutantmean("specdata", "sulfate", 34)
pollutantmean <- function(directory, pollutant, id = 1:332) {
combined_data <- 0
for (i in id) {
n_char <- nchar(as.character(i));
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
# filtering out column based on pollutant
col_list <- c("NULL", "NULL", "NULL", "NULL")
if (pollutant == "sulfate") {
col_list[2] <- NA
} else {
col_list[3] <- NA
}
# read the file_name - only pollutant column - filter NA
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE, colClasses = col_list)
complete_data_only <- file_data[complete.cases(file_data),]
combined_data <- c(combined_data, complete_data_only)
}
mean(combined_data)
}
pollutantmean("specdata", "nitrate")
complete <- function (directory, id = 1:332) {
df <- data.frame(
id = c(),
nobs = c()
)
for (i in id) {
n_char <- nchar(as.character(i))
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
print(complete_count)
temp <- data.frame(
id = i,
nobs = complete_count
)
df <- rbind(df, temp)
}
df
}
cc <- complete("specdata", c(6, 10, 20, 34, 100, 200, 310))
print(cc$nobs)
cc <- complete("specdata", c(6, 10, 20, 34, 100, 200, 310))
print(cc$nobs)
complete <- function (directory, id = 1:332) {
df <- data.frame(
id = c(),
nobs = c()
)
for (i in id) {
n_char <- nchar(as.character(i))
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
print(complete_count)
temp <- data.frame(
id = i,
nobs = complete_count
)
df <- rbind(df, temp)
}
df
}
cc <- complete("specdata", 54)
print(cc$nobs)
complete <- function (directory, id = 1:332) {
df <- data.frame(
id = c(),
nobs = c()
)
for (i in id) {
n_char <- nchar(as.character(i))
file_name <- as.character(i)
if (n_char == 1) {
file_name <- paste("00", file_name, sep="")
} else if (n_char == 2) {
file_name <- paste("0", file_name, sep="")
}
file_data <- read.csv(paste(directory,"/",file_name,".csv", sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
print(complete_count)
temp <- data.frame(
id = i,
nobs = complete_count
)
df <- rbind(df, temp)
}
df
}
RNGversion("3.5.1")
set.seed(42)
cc <- complete("specdata", 332:1)
use <- sample(332, 10)
print(cc[use, "nobs"])
corr <- function (directory, threshold = 0) {
result = c()
all_files = list.files(directory)
for (file in all_files) {
file_data <- read.csv(paste(directory,"/",file, sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
if (complete_count > threshold) {
result <- c(result, cor(file_data$sulfate, file_data$nitrate, use="complete.obs"))
}
}
result
}
cr <- corr("specdata")
cr <- sort(cr)
RNGversion("3.5.1")
set.seed(868)
out <- round(cr[sample(length(cr), 5)], 4)
print(out)
corr <- function (directory, threshold = 0) {
result = c()
all_files = list.files(directory)
for (file in all_files) {
file_data <- read.csv(paste(directory,"/",file, sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
if (complete_count > threshold) {
result <- c(result, cor(file_data$sulfate, file_data$nitrate, use="complete.obs"))
}
}
result
}
cr <- corr("specdata", 129)
cr <- sort(cr)
n <- length(cr)
RNGversion("3.5.1")
set.seed(197)
out <- c(n, round(cr[sample(n, 5)], 4))
print(out)
corr <- function (directory, threshold = 0) {
result = c()
all_files = list.files(directory)
for (file in all_files) {
file_data <- read.csv(paste(directory,"/",file, sep=""), header = TRUE)
complete_count <- length(which(complete.cases(file_data)))
if (complete_count > threshold) {
result <- c(result, cor(file_data$sulfate, file_data$nitrate, use="complete.obs"))
}
}
result
}
cr <- corr("specdata", 2000)
n <- length(cr)
cr <- corr("specdata", 1000)
cr <- sort(cr)
print(c(n, round(cr, 4)))
